<!DOCTYPE html><!--[if lte IE 7]> <html class="no-js ie67 ie678" lang="en"> <![endif]-->
<!--[if IE 8]> <html class="no-js ie8 ie678" lang="en"> <![endif]-->
<!--[if IE 9]> <html class="no-js ie9" lang="en"> <![endif]-->
<html lang="en">
  <head>
    <meta charset="utf-8"><!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <link rel="shortcut icon" href="/assets/images/favicon.png">
    <title> OpenVZ
    </title><link  rel="stylesheet" href="/vendors/css/knacss.css" /><link  rel="stylesheet" href="/vendors/css/sunburst.css" /><link  rel="stylesheet" href="/assets/css/main.css" /><link  rel="stylesheet" href="/assets/css/home.css" />
  </head>
  <body>
    <div class="navbar fixed"><a href="/" class="nav-logo left"><img src="/assets/images/happycloud.png" alt="Happy Cloud"></a><span class="subtitle"> OpenVZ</span><a href="/hack/getting-started/" class="right">hack</a><a href="/host/install.html" class="right">host</a></div>
    <div class="wrapper">
      <aside class="mod left w25 aside">
        <nav id="navigation" role="navigation">
          <ul class="first-level">
            <li class="big"><a href="/host/install.html" class="label">Install Cozy on your server</a>
            </li>
            <li class="big"><a href="/host/raspberry.html" class="label">Raspberry Pi</a>
            </li>
            <li class="big selected"><a href="/host/openvz.html" class="label"> OpenVZ</a>
            </li>
            <li class="big"><a href="/host/update.html" class="label">Update your cozy</a>
            </li>
            <li class="big"><a href="/host/uninstall.html" class="label">Uninstall</a>
            </li>
            <li class="big"><a href="/host/trouble-shootings.html" class="label">Trouble Shootings</a>
            </li>
          </ul>
        </nav>
      </aside>
      <div id="main" role="main" class="mod pam w75"><h1>Setup an OpenVZ image on your server.</h1>
<p>Here we assume that you already install OpenVZ utilities.</p>
<h3>Download and start your OpenVZ container</h3>
<pre class="highlighted"><code class="bash"><span class="comment"># Download the OpenVz template (~ 1.3GB)</span>
wget http://files.cozycloud.cc/vzdump-openvz-cozycloud-debian.tar

<span class="comment"># Mount and start the container</span>
vzrestore vzdump-openvz-cozycloud-debian.tar ctid
vzctl start ctid</code></pre>
<p>NB: Replace ctid by an available ctid (101, 102, etc.)</p>
<h3>With a configured network</h3>
<p>You will probably need to give access to your container from outside of your
host. Here is a way to do it:</p>
<pre class="highlighted"><code class="bash"><span class="comment"># Download the OpenVz template (~ 1.3GB)</span>
wget http://files.cozycloud.cc/vzdump-openvz-cozycloud-debian.tar

<span class="comment"># Mount your new container, give it an IP address and start it:</span>
vzrestore vzdump-openvz-cozycloud-debian.tar ctid
vzctl <span class="keyword">set</span> ctid --ipadd 10.0.0.10  --save 
vzctl start ctid

<span class="comment"># Setup a reverse proxy that routes your 8888 port to https://10.0.0.10:443</span>
<span class="comment"># (Use Nginx for instance).</span>
<span class="comment"># ...</span>
<span class="comment"># Then authorize the routing:</span>
/sbin/iptables -t nat -A PREROUTING -i vmbr0 -p tcp --dport 8888 -j DNAT --to 10.0.0.10:443</code></pre>
<p>Of course you can change 8888 by the value you want.</p>

      </div>
      <footer id="footer" role="contentinfo" class="line pam row"><a href="https://github.com/mycozycloud">Github</a><a href="irc://irc.freenode.net/cozycloud">IRC</a><a href="mailto:contact@cozycloud.cc">Contact</a><a href="https://groups.google.com/forum/?fromgroups#!forum/cozy-cloud">mailing-list</a><a href="https://cozycloud.cc">Cozy Cloud</a></footer>
    </div><script defer="defer"  src="/vendors/javascripts/jquery-2.0.3.min.js"></script><script defer="defer"  src="/assets/javascripts/main.js"></script>
  </body>
</html>